{"version":3,"sources":["../../../src/draggable.directive.ts"],"names":[],"mappings":"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","file":"draggable.directive.js","sourceRoot":"","sourcesContent":["import {\n  Directive,\n  OnInit,\n  ElementRef,\n  Renderer2,\n  Output,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnChanges,\n  NgZone,\n  SimpleChanges\n} from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/mergeMap';\nimport 'rxjs/add/operator/takeUntil';\nimport 'rxjs/add/operator/take';\nimport 'rxjs/add/operator/takeLast';\nimport 'rxjs/add/operator/pairwise';\nimport 'rxjs/add/operator/share';\nimport { DraggableHelper } from './draggable-helper.provider';\n\nexport interface Coordinates {\n  x: number;\n  y: number;\n}\n\nexport interface DragAxis {\n  x: boolean;\n  y: boolean;\n}\n\nexport interface SnapGrid {\n  x?: number;\n  y?: number;\n}\n\nexport type ValidateDrag = (coordinates: Coordinates) => boolean;\n\nexport interface PointerEvent {\n  clientX: number;\n  clientY: number;\n  event: MouseEvent | TouchEvent;\n}\n\nconst MOVE_CURSOR: string = 'move';\n\n\nexport class DraggableDirective implements OnInit, OnChanges, OnDestroy {\n   dropData: any;\n\n   dragAxis: DragAxis = { x: true, y: true };\n\n   dragSnapGrid: SnapGrid = {};\n\n   ghostDragEnabled: boolean = true;\n\n   validateDrag: ValidateDrag;\n\n   dragCursor = MOVE_CURSOR;\n\n  \n  dragStart: EventEmitter<Coordinates> = new EventEmitter<Coordinates>();\n\n  \n  dragging: EventEmitter<Coordinates> = new EventEmitter<Coordinates>();\n\n  \n  dragEnd: EventEmitter<Coordinates> = new EventEmitter<Coordinates>();\n\n  /**\n   * @hidden\n   */\n  pointerDown: Subject<PointerEvent> = new Subject();\n\n  /**\n   * @hidden\n   */\n  pointerMove: Subject<PointerEvent> = new Subject();\n\n  /**\n   * @hidden\n   */\n  pointerUp: Subject<PointerEvent> = new Subject();\n\n  private eventListenerSubscriptions: {\n    mousemove?: () => void;\n    mousedown?: () => void;\n    mouseup?: () => void;\n    mouseenter?: () => void;\n    mouseleave?: () => void;\n    touchstart?: () => void;\n    touchmove?: () => void;\n    touchend?: () => void;\n    touchcancel?: () => void;\n  } = {};\n\n  /**\n   * @hidden\n   */\n  constructor(\n    public element: ElementRef,\n    private renderer: Renderer2,\n    private draggableHelper: DraggableHelper,\n    private zone: NgZone\n  ) {}\n\n  ngOnInit(): void {\n    this.checkEventListeners();\n\n    const pointerDrag: Observable<any> = this.pointerDown\n      .filter(() => this.canDrag())\n      .flatMap((pointerDownEvent: PointerEvent) => {\n        pointerDownEvent.event.preventDefault();\n\n        this.zone.run(() => {\n          this.dragStart.next({ x: 0, y: 0 });\n        });\n\n        this.setCursor(this.dragCursor);\n\n        const currentDrag: Subject<any> = new Subject();\n\n        this.draggableHelper.currentDrag.next(currentDrag);\n\n        const pointerMove: Observable<Coordinates> = this.pointerMove\n          .map((pointerMoveEvent: PointerEvent) => {\n            pointerMoveEvent.event.preventDefault();\n\n            return {\n              currentDrag,\n              x: pointerMoveEvent.clientX - pointerDownEvent.clientX,\n              y: pointerMoveEvent.clientY - pointerDownEvent.clientY,\n              clientX: pointerMoveEvent.clientX,\n              clientY: pointerMoveEvent.clientY\n            };\n          })\n          .map((moveData: Coordinates) => {\n            if (this.dragSnapGrid.x) {\n              moveData.x =\n                Math.floor(moveData.x / this.dragSnapGrid.x) *\n                this.dragSnapGrid.x;\n            }\n\n            if (this.dragSnapGrid.y) {\n              moveData.y =\n                Math.floor(moveData.y / this.dragSnapGrid.y) *\n                this.dragSnapGrid.y;\n            }\n\n            return moveData;\n          })\n          .map((moveData: Coordinates) => {\n            if (!this.dragAxis.x) {\n              moveData.x = 0;\n            }\n\n            if (!this.dragAxis.y) {\n              moveData.y = 0;\n            }\n\n            return moveData;\n          })\n          .filter(\n            ({ x, y }) => !this.validateDrag || this.validateDrag({ x, y })\n          )\n          .takeUntil(Observable.merge(this.pointerUp, this.pointerDown));\n\n        pointerMove.takeLast(1).subscribe(({ x, y }) => {\n          this.zone.run(() => {\n            this.dragEnd.next({ x, y });\n          });\n          currentDrag.complete();\n          this.setCssTransform(null);\n          if (this.ghostDragEnabled) {\n            this.renderer.setStyle(\n              this.element.nativeElement,\n              'pointerEvents',\n              null\n            );\n          }\n        });\n\n        this.pointerMove.next(pointerDownEvent);\n\n        return pointerMove;\n      })\n      .share();\n\n    Observable.merge(\n      pointerDrag.take(1).map(value => [, value]),\n      pointerDrag.pairwise()\n    )\n      .filter(([previous, next]) => {\n        if (!previous) {\n          return true;\n        }\n        return previous.x !== next.x || previous.y !== next.y;\n      })\n      .map(([previous, next]) => next)\n      .subscribe(({ x, y, currentDrag, clientX, clientY }) => {\n        this.zone.run(() => {\n          this.dragging.next({ x, y });\n        });\n        if (this.ghostDragEnabled) {\n          this.renderer.setStyle(\n            this.element.nativeElement,\n            'pointerEvents',\n            'none'\n          );\n        }\n        this.setCssTransform(`translate(${x}px, ${y}px)`);\n        currentDrag.next({\n          clientX,\n          clientY,\n          dropData: this.dropData\n        });\n      });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['dragAxis']) {\n      this.checkEventListeners();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribeEventListeners();\n    this.pointerDown.complete();\n    this.pointerMove.complete();\n    this.pointerUp.complete();\n  }\n\n  private checkEventListeners(): void {\n    const canDrag: boolean = this.canDrag();\n    const hasEventListeners: boolean =\n      Object.keys(this.eventListenerSubscriptions).length > 0;\n\n    if (canDrag && !hasEventListeners) {\n      this.zone.runOutsideAngular(() => {\n        this.eventListenerSubscriptions.mousedown = this.renderer.listen(\n          this.element.nativeElement,\n          'mousedown',\n          (event: MouseEvent) => {\n            this.onMouseDown(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.mouseup = this.renderer.listen(\n          'document',\n          'mouseup',\n          (event: MouseEvent) => {\n            this.onMouseUp(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.touchstart = this.renderer.listen(\n          this.element.nativeElement,\n          'touchstart',\n          (event: TouchEvent) => {\n            this.onTouchStart(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.touchend = this.renderer.listen(\n          'document',\n          'touchend',\n          (event: TouchEvent) => {\n            this.onTouchEnd(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.touchcancel = this.renderer.listen(\n          'document',\n          'touchcancel',\n          (event: TouchEvent) => {\n            this.onTouchEnd(event);\n          }\n        );\n\n        this.eventListenerSubscriptions.mouseenter = this.renderer.listen(\n          this.element.nativeElement,\n          'mouseenter',\n          () => {\n            this.onMouseEnter();\n          }\n        );\n\n        this.eventListenerSubscriptions.mouseleave = this.renderer.listen(\n          this.element.nativeElement,\n          'mouseleave',\n          () => {\n            this.onMouseLeave();\n          }\n        );\n      });\n    } else if (!canDrag && hasEventListeners) {\n      this.unsubscribeEventListeners();\n    }\n  }\n\n  private onMouseDown(event: MouseEvent): void {\n    if (!this.eventListenerSubscriptions.mousemove) {\n      this.eventListenerSubscriptions.mousemove = this.renderer.listen(\n        'document',\n        'mousemove',\n        (mouseMoveEvent: MouseEvent) => {\n          this.pointerMove.next({\n            event: mouseMoveEvent,\n            clientX: mouseMoveEvent.clientX,\n            clientY: mouseMoveEvent.clientY\n          });\n        }\n      );\n    }\n    this.pointerDown.next({\n      event,\n      clientX: event.clientX,\n      clientY: event.clientY\n    });\n  }\n\n  private onMouseUp(event: MouseEvent): void {\n    if (this.eventListenerSubscriptions.mousemove) {\n      this.eventListenerSubscriptions.mousemove();\n      delete this.eventListenerSubscriptions.mousemove;\n    }\n    this.pointerUp.next({\n      event,\n      clientX: event.clientX,\n      clientY: event.clientY\n    });\n  }\n\n  private onTouchStart(event: TouchEvent): void {\n    if (!this.eventListenerSubscriptions.touchmove) {\n      this.eventListenerSubscriptions.touchmove = this.renderer.listen(\n        'document',\n        'touchmove',\n        (touchMoveEvent: TouchEvent) => {\n          this.pointerMove.next({\n            event: touchMoveEvent,\n            clientX: touchMoveEvent.targetTouches[0].clientX,\n            clientY: touchMoveEvent.targetTouches[0].clientY\n          });\n        }\n      );\n    }\n    this.pointerDown.next({\n      event,\n      clientX: event.touches[0].clientX,\n      clientY: event.touches[0].clientY\n    });\n  }\n\n  private onTouchEnd(event: TouchEvent): void {\n    if (this.eventListenerSubscriptions.touchmove) {\n      this.eventListenerSubscriptions.touchmove();\n      delete this.eventListenerSubscriptions.touchmove;\n    }\n    this.pointerUp.next({\n      event,\n      clientX: event.changedTouches[0].clientX,\n      clientY: event.changedTouches[0].clientY\n    });\n  }\n\n  private onMouseEnter(): void {\n    this.setCursor(this.dragCursor);\n  }\n\n  private onMouseLeave(): void {\n    this.setCursor(null);\n  }\n\n  private setCssTransform(value: string): void {\n    if (this.ghostDragEnabled) {\n      this.renderer.setStyle(this.element.nativeElement, 'transform', value);\n      this.renderer.setStyle(\n        this.element.nativeElement,\n        '-webkit-transform',\n        value\n      );\n      this.renderer.setStyle(\n        this.element.nativeElement,\n        '-ms-transform',\n        value\n      );\n      this.renderer.setStyle(\n        this.element.nativeElement,\n        '-moz-transform',\n        value\n      );\n      this.renderer.setStyle(this.element.nativeElement, '-o-transform', value);\n    }\n  }\n\n  private canDrag(): boolean {\n    return this.dragAxis.x || this.dragAxis.y;\n  }\n\n  private setCursor(value: string): void {\n    this.renderer.setStyle(this.element.nativeElement, 'cursor', value);\n  }\n\n  private unsubscribeEventListeners(): void {\n    Object.keys(this.eventListenerSubscriptions).forEach((type: string) => {\n      this.eventListenerSubscriptions[type]();\n      delete this.eventListenerSubscriptions[type];\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[mwlDraggable]'\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n{type: DraggableHelper, },\n{type: NgZone, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'dropData': [{ type: Input },],\n'dragAxis': [{ type: Input },],\n'dragSnapGrid': [{ type: Input },],\n'ghostDragEnabled': [{ type: Input },],\n'validateDrag': [{ type: Input },],\n'dragCursor': [{ type: Input },],\n'dragStart': [{ type: Output },],\n'dragging': [{ type: Output },],\n'dragEnd': [{ type: Output },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}